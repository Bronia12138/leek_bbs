<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>å…³æ³¨åŠ¨æ€ - ç°ä»£å†…å®¹ç¤¾åŒº</title>
    <link rel="icon" href="/leek_bbs/statics/images/favicon.ico" >
    <link rel="stylesheet" href="/leek_bbs/statics/yu-ui/js_css/yu.css">
    <link rel="stylesheet" href="/leek_bbs/statics/layui/css/layui.css">
    <link rel="stylesheet" href="/leek_bbs/statics/bootstrap-3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="/leek_bbs/statics/css/main.css">

    <link rel="stylesheet" href="/leek_bbs/statics/css/modern-ui.css">
    <link rel="stylesheet" href="/leek_bbs/statics/css/modern-ui-dynamic.css">

    <script src="/leek_bbs/statics/component/common_import.js"></script>
</head>

<body>
<div id="modern-index-shell" data-page="dynamic">

    <div id="hmc">
        <head_menu_comp :is_login="isLoginShow" ref="fo"></head_menu_comp>
    </div>

    <main class="modern-main-content d-hidden" id="dynamicApp">
        <div class="container">
            <nav class="modern-breadcrumb">
                <a href="/leek_bbs/skipPage/index"><i class="glyphicon glyphicon-home"></i> é¦–é¡µ</a>
                <span class="sep">/</span>
                <span class="current">æˆ‘çš„å…³æ³¨</span>
            </nav>

            <div class="dynamic-feed-wrapper" v-cloak>
                <div class="dynamic-list" v-if="isExistData">
                    <article class="modern-card dynamic-item" v-for="item in carePosts" v-if="item.id != null">
                        <a :href="'/leek_bbs/skipPage/blogPage?theme_id='+item.id" :key="item.id" class="item-link">
                            <header class="item-header">
                                <img :src="'/leek_bbs/'+item.picture" class="author-avatar" alt="">
                                <div class="author-meta">
                                    <span class="author-name">{{item.post_author}}</span>
                                    <span class="action-label">å‘å¸ƒäº†æ–°ä¸»é¢˜</span>
                                </div>
                            </header>

                            <div class="item-body">
                                <h2 class="item-title">{{item.title}}</h2>
                                <div class="item-excerpt" v-html="item.content"></div>
                            </div>
                        </a>
                    </article>
                </div>

                <div class="modern-empty-state" v-else>
                    <div class="empty-icon">ğŸ“‚</div>
                    <h3>æš‚æ— åŠ¨æ€å†…å®¹</h3>
                    <p>å…³æ³¨ä½ æ„Ÿå…´è¶£çš„äººï¼Œç¬¬ä¸€æ—¶é—´è·å–ä»–ä»¬çš„æ›´æ–°ã€‚</p>
                </div>
            </div>
        </div>
    </main>

    <footer id="footer" class="modern-footer d-hidden">
        <div class="container">
            <p>Â© 2026 å°±ä¸šäº¤æµè®ºå› Â· æ‰“é€ ç°ä»£å†…å®¹ç¤¾åŒº</p>
            <p class="footer-links">
                <span>é‚®ç®±ï¼šhanser12581@gmail.com</span>
                <span class="dot">Â·</span>
                <span>å‹é“¾ï¼šwww.bronia.xyz</span>
            </p>
        </div>
    </footer>
</div>

<script src="/leek_bbs/statics/component/head_menu.js"></script>
<script>
    // ä¿æŒåŸæœ‰ Vue å®ä¾‹é€»è¾‘ä¸å˜
    const dynamicApp = new Vue({
        el:"#dynamicApp",
        data:{
            isExistData:true,
            carePosts:[]
        },
        methods:{
            getCarePostsData(){
                axios.get(`/leek_bbs/bbs/care/listCarePosts?uid=${userInfo.id}`).then(response => {
                    const data = response.data;
                    if (data[0] == null){
                        this.isExistData = false;
                    }
                    this.carePosts = data;
                }).catch(error => {
                    ui.error("è·å–æ•°æ®å‡ºç°å¼‚å¸¸",3000,true);
                    console.log(error);
                })
            }
        }
    });

    setTimeout(() => {
        if (userInfo != null){
            dynamicApp.getCarePostsData();
            $("#dynamicApp").removeClass("d-hidden");
            $("#footer").removeClass("d-hidden");
        } else {
            layui.login();
        }
    },200);
</script>
</body>
</html>
